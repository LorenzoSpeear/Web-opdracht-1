<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Meter</title>
    <link rel="stylesheet" href="style.css">
    <style>

    </style>
    <h1>Love tester</h1>
    <p>Find out your love compatibility!</p>
    <h2 id="feedback"></h2>
</head>

<body>

    <form action="" onsubmit="return false;">
        <div id="naam1div"><input type="text" placeholder="Vul hier een naam in" id="naam1"></div>
        <div id="percentage">0&nbsp;%</div>
        <div id="naam2div"><input type="text" placeholder="Vul hier een naam in" id="naam2"></div>
    </form>



    <svg class="heart-frame" id="heart" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
        <path d="
      M300 120
      C420 20, 580 180, 460 320
      C420 370, 350 410, 300 460
      C250 410, 180 370, 140 320
      C20 180, 180 20, 300 120
    " class="ornament" />
    </svg>
    <audio id="failSound" src="fahhh.mp3"></audio>
    <audio id="loveSound" src="love.mp3"></audio>
    <audio id="romantical" src="romantical.mp3"></audio>
    <audio id="heheboi" src="heheboi.mp3"></audio>
    <audio id="bgMusic" src="backgroundmusic.mp3" loop></audio>



    </id>

    <script>
        const percentage = document.getElementById('percentage');
        const naam1 = document.getElementById('naam1');
        const naam2 = document.getElementById('naam2');
        const submitBtn = document.getElementById('heart');
        const feedback = document.getElementById('feedback');

        const failSound = document.getElementById('failSound');
        const wow = document.getElementById('loveSound');
        const romantical = document.getElementById('romantical');
        const heheboi = document.getElementById('heheboi');

        const bgMusic = document.getElementById('bgMusic');
        let bgStarted = false;




        function isValidName(name) {
            const cleaned = name.trim();
            const regex = /^[A-Za-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ã¿' -]+$/;

            if (!regex.test(cleaned)) return false;

            const lettersOnly = cleaned.replace(/[^A-Za-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ã¿]/g, "");
            return lettersOnly.length >= 2;
        }

        function test() {
            // start background music once (browser needs a user interaction)
            if (!bgStarted) {
                bgMusic.volume = 0.25;  // zachter (0.0 - 1.0)
                bgMusic.play();
                bgStarted = true;
            }



            const n1 = naam1.value;
            const n2 = naam2.value;

            if (n1.trim() === "" || n2.trim() === "") {
                feedback.innerHTML = "Vul beide namen in â¤ï¸";
                percentage.innerHTML = "0%";
                return;
            }

            if (!isValidName(n1) || !isValidName(n2)) {
                feedback.innerHTML = "Gebruik alleen echte namen ðŸ™‚";
                percentage.innerHTML = "0%";
                return;
            }

            const combinedNames = [n1, n2]
                .map(n => n.toLowerCase().trim())
                .sort()
                .join("");

            let score = 0;

            for (let i = 0; i < combinedNames.length; i++) {
                score += combinedNames.charCodeAt(i);
            }

            const loveScore = score % 101;

            percentage.innerHTML = `${loveScore}%`;
            feedback.innerHTML = "";

            failSound.pause();
            wow.pause();
            romantical.pause();
            heheboi.pause();

            failSound.currentTime = 0;
            wow.currentTime = 0;
            romantical.currentTime = 0;
            heheboi.currentTime = 0;



            // PLAY SOUND
            if (loveScore === 69) {
                feedback.innerHTML = "Nice ðŸ˜";
                heheboi.play();
            }
            else if (loveScore > 80) {
                feedback.innerHTML = "ULTRA LOVE ðŸ’ž";
                romantical.play();
            }
            else if (loveScore > 70) {
                feedback.innerHTML = "TRUE LOVE ðŸ’–";
                wow.play();
            }
            else if (loveScore < 15) {
                feedback.innerHTML = "Oeiâ€¦ dit wordt niks ðŸ˜¬";
                failSound.play();
            }
            else {
                feedback.innerHTML = "Hmmâ€¦ misschien ðŸ˜‰";
            }


        }

        submitBtn.addEventListener('click', test);
    </script>


</html>